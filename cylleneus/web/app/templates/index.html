{% extends "base.html" %}

{% block header %}
<script src='/static/js/search.js'></script>
{% endblock %}

{% block search %}
    <div class="row justify-content-center">
        <div class="col-md-9">
            <div class="card mb3">
                <div class="card-body">
                    <p class="h6 font-weight-bold">Query</p>
                    <form action="/search" method="GET">
                        <div class="form-group">
                            <input type="text"
                                   class="form-control"
                                   name="query"
                                   autocomplete="off"
                                   value="{{ search_text }}"
                                   placeholder=""
                                   id="text"/>
                        </div>
                        <p class="h6 font-weight-bold">Corpus</p>
                        <div class="form-group">
                            <select class="form-control" name="corpus" id="corpus">
                                {% for corpus in corpora %}
                                <option value="{{ corpus }}">{{ corpus }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <a class="card-link" href="corpus" >Available corpora</a>
                        <div class="form-group float-right">
                            <button type="submit" id="submit" value="Search" class="btn btn-primary">Search</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center pt-4">
        <div class="col-md-9">
            <div class="card text-white bg-dark mb-3">
                <h5 class="card-header" id="how-to-search">How to search
                    <button type="button" class="close" data-toggle="collapse" data-target="#query-types" aria-expanded="true" aria-controls="query-types"/>
                    <span class="text-light" aria-hidden="true">&plus;</span></button>
                </h5>
                <div class="card-body collapse" id="query-types" aria-labelledby="how-to-search"
                     data-parent="#accordion">
                    <table class="w-100">
                        <tr>
                            <td><p class="card-text"><kbd>'virtutibus'</kbd> word form</p></td>
                            <td><p class="card-text"><kbd>&lt;dico&gt;</kbd> lemma-based</p>
                            <td><p class="card-text"><kbd>[en?angry]</kbd> gloss (en, fr, it, es)</p></td>
                        </tr>
                        <tr>
                            <td><p class="card-text"><kbd>{611}</kbd> domain-based (DDCS codes)</p></td>
                            <td><p class="card-text"><kbd>/ablative absolute/</kbd> syntax (LASLA only)</p></td>
                            <td><p class="card-text"><kbd>:GEN.PL.</kbd> morphology (Leipzig notation)</p></td>
                        </tr>
                        <tr><td><p class="card-text"><kbd>&lt;/::...&gt;</kbd> lexical relation (/, \, +c, -c, or <)</p></td>
                            <td colspan="2"><p class="card-text"><kbd>[!::en?...]</kbd> semantic relation (!, @, ~, |, *, #m, #p, #s, +r, %m, %p, %s, -r, >, ^, $, or =)</p></td></tr>
                    </table>
                    <p class="card-text">Queries can be combined to form complex proximity
                        and adjacency searches. Enclosing queries within double quotes <kbd>"..."</kbd> requires that matching words occur
                        in the specified order. Morphological annotations can also be attached to lemma, gloss, and semfield queries to filter results: e.g., <kbd>&lt;animus&gt;:ACC.</kbd> will match both <em>animum</em> and <em>animos</em>.</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
{% if results %}
    {% for item in results %}
    <div class="row justify-content-center pt-4">
        <div class="col-md-9">
            <div class="card">
                <div class="card-body">
                    {{ item|safe }}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
{% endif %}

{% endblock %}
